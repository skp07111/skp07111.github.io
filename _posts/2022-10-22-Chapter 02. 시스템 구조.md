---
title: Chapter 02. 시스템 구조
date: 2022-10-22 +0900
categories: [Computer Science, Operating System]
tags: [CS, OS, operating system]
---
### Chapter 02 시스템 구조

▪ Mobile Computing을 가능하게 해주는 기기들은 스마트폰, 태블릿 PC, 스마트 워치 등 다양
▪ 모바일 기기들의 특징: 데스크탑 컴퓨터와 달리 가볍고, 크기가 작고, 전력 소모에 민감하며, 저장공간이 작고, 통신을 하기 위한 수신기가 있다는 것
▪ 모바일 기기는 수신장치가 많은데, 우리가 일상에서 보는 것만 고려해도 다음과 같이 최소 4개의 수신기가 필요하다.
- WLAN 무선 장치 수신기
- 모바일 네트워크 수신기
- 블루투스 수신기
- GPS 수신기 
▪ 온라인 서비스에 접근을 허용하기 위해 IEEE 표준 802.11 무선 또는 셀룰러 데이터 네트워크를 사용한다.
▪ 터치스크린이 모바일 기기에서 데스크탑 컴퓨터의 키보드, 마우스와 같은 역할을 한다.
▪ 현재 휴대 컴퓨팅에서 두 개의 지배적인 운영체제는 Android와 iOS이다. iOS는 애플 아이폰과 아이패드에서 수행되도록 설계되었으며 안드로이드는 다양한 제조 업체의 스마트폰과 태블릿에서 수행된다.

▪ 분산 시스템은 물리적으로 떨어져 있는 이기종 컴퓨터들의 집합이다. 분산 시스템의 컴퓨터들은 사용자가 시스템 내의 다양한 자원들을 접근 할 수 있도록 네트워크로 연결되어 있다.
▪ 네트워크는 두 개 이상 시스템 간의 통신 경로로, 분산 시스템의 많은 기능들은 네트워킹에 의존하고 있다. 대부분의 운영체제는 TCP/IP를 지원한다. 
▪ 네트워크는 노드 간의 거리에 의해 타입이 결정된다
- LAN(Local Area Network): 한 방, 한 층, 한 건물
- WAN(Wide Area Network): 건물, 도시 또는 국가 사이
- MAN(Metropolitan Area Network): 한 도시 내의 건물들
- PAN(Personal Area Network): 전화기와 헤드셋, 스마트폰과 데스크톱 컴퓨터 사이
▪ 네트워크 운영체제는 네트워크를 통한 파일 공유, 다른 컴퓨터 사이에 존재하는 다른 프로세스 간의 메시지 교환을 제공한다. 

▪ 클라이언트 - 서버 컴퓨팅
서버와 클라이언트는 일대다 관계이며, 클라이언트가 요청하면 서버가 응답하는 Request and Response 를 통해 서비스한다. Request and Response는 HTTP프로토콜의 가장 기본적인 기능이며, HTTP프로토콜은 전 세계 사람들이 약속한 통신 규약이다.
- 계산-서버 시스템: 클라이언트가 어떤 작업을 요청할 수 있는 인터페이스 제공, 그 결과로 서버는 작업을 수행하고 결과를 클라이언트에게 돌려보낸다.
- 파일-서버 시스템: 클라이언트가 파일을 생성, 갱신, 읽기 및 제거할 수 있는 파일 시스템 인터페이스를 제공한다.

▪ 가상화는 운영체제가 다른 운영체제 내에서 하나의 응용처럼 수행될 수 있도록 한다. 
- 가상화에서는 특정 CPU를 위해 컴파일 된 운영체제가 동일 CPU 용의 다른 운영체제 내에서 수행된다. 
- 가상화는 다수의 사용자가 작업을 병행 수행하기 위한 방법으로 IBM의 대형컴퓨터에서 처음 등장하였으며, 현대의 운영체제가 다수의 응용을 신뢰성있게 수행할 능력이 있어도, 가상화의 이용은 지속적으로 증가하고 있다. 
- 넓게 말하면 가상화는 에뮬레이션을 포함하는 소프트웨어 집단의 한 구성원이다.

▪ Peer to Peer Computing(P2P)는 분산 시스템의 다른 구조로, 클라이언트와 서버가 서로 구별되지 않는다. 시스템 상의 모든 노드가 Peer로 간주되고 각 Peer는 서비스를 요청하는지 제공하는지에 따라 클라이언트도 될 수 있고 서버도 될 수 있다. 

▪ 클라우드 컴퓨팅은 계산, 저장장치, 응용까지 네트워크를 통한 서비스로 제공하는 계산 유형이다. 클라우드 컴퓨팅은 가상화를 그 기능의 기반으로 사용한다.
- 공중 클라우드: 서비스를 위해 지불이 가능한 사람은 누구나 인터넷을 통해 사용이 가능한 클라우드
- 사유 클라우드: 한 회사가 사용하기 위해 운영하는 클라우드
- 혼합형 클라우드: 공공과 사유 부분을 모두 포함하는 클라우드
- 소프트웨어 서비스(SaaS): 인터넷을 통해 사용 가능한 하나 이상의 응용
- 플랫폼 서비스(PaaS): 인터넷을 통해 사용하도록 응용에 맞게 준비된 소프트웨어 스택
- 하부구조 서비스(IaaS): 인터넷을 통해 사용 가능한 서버나 저장장치


▪ 운영체제는 프로그램 실행 환경을 제공하고, 프로그램과 그 프로그램의 사용자에게 특정 서비스를 제공한다. 운영체제마다 제공하는 서비스는 다르지만 공통적인 부분을 발견할 수 있다.

<프로그래머가 프로그래밍을 쉽게 할 수 있도록 편리함을 제공>
▪ 사용자 인터페이스(UI): 거의 모든 운영체제가 제공하는 기능이며, 이 인터페이스는 여러 형태로 제공될 수 있다. 대표적으로 명령어 라인 인터페이스(CLI), 그래피컬 사용자 인터페이스(GUI)가 있다.
▪ 프로그램 수행: 프로그램을 메모리에 적재해 실행할 수 있어야 하며 프로그램은 정상적으로든 비정상적으로든 실행이 종료되어야 한다.
▪ 입출력 연산: 수행 중인 프로그램은 입출력을 요구할 수 있으며 특정 장치에 대해서는 특수한 기능이 요구될 수 있다. 효율성과 보호를 위해 사용자들은 입출력 장치의 직접 제어가 불가능하다.
▪ 파일 시스템 조작: 프로그램은 파일을 읽고 쓰고 생성하고 삭제하고 찾을 수 있으며 파일의 정보를 열거할 수 있어야 하며, 몇몇 프로그램은 권한을 관리할 수 있다.
▪ 통신: 동일한 컴퓨터에서 수행되고 있는 프로세스들 사이에서, 컴퓨터 네트워크에 의해 함께 묶여있는 서로 다른 컴퓨터 시스템 상에서 수행되는 프로세스들 사이에서 통신이 일어난다. 통신은 공유 메모리를 통해서 구현될 수 있고, 메시지 전달 기법에 의해 구현될 수 있는데 메시지 전달 기법에서는 정보의 패킷들이 운영체제에 의해 프로세스들 사이를 이동한다.
▪ 오류 탐지: 오류는 CPU, 메모리, 입출력 장치, 사용자 프로그램에서 일어날 수 있으며 운영체제는 올바르고 일관성 있는 계산을 보장하기 위해 각 유형의 오류에 대해 적당한 조치를 취해야 한다.

<시스템 자체의 효율적인 동작을 보장하기 위한 기능>
▪ 자원 할당: 다수의 사용자나 다수의 작업들이 동시에 실행될 때 그들 각각에 자원을 할당해주어야 한다. 
▪ 회계: 사용자가 어떤 종류의 컴퓨터 자원을 얼마나 많이 사용하는지를 추적하며 이러한 기록 관리는 회계 또는 사용 통계를 내기 위해 사용된다. 
▪ 보호와 보안: 서로 다른 여러 프로세스가 병행하게 수행될 때, 한 프로세스가 다른 프로세스나 운영체제 자체를 방해해서는 안된다.
- 보호는 시스템 자원에 대한 모든 접근이 통제되도록 보장하는 것을 필요로 한다.
- 보안은 패스워드를 통한 인증 뿐만 아니라 외부 입출력 장치들을 부적합한 접근 시도로부터 지키고, 침입 탐지를 위해 모든 접속 기록을 기록한다. 

▪ 명령어 해석기
어떤 운영체제는 커널에 명령 해석기를 포함하고 있는데, 선택할 수 있는 여러 명령어 해석기를 제공하는 시스템에서 이 해석기는 셸(shell)이라고 불린다. 
- 명령어 해석기의 중요한 기능: 사용자가 지정한 명령을 가져와서 그것을 수행하는 것

▪ 시스템 콜은 운영체제에 의해 사용 가능하게 된 서비스에 대한 인터페이스를 제공하며, 일반적으로 C와 C++ 언어로 작성된 루틴 형태로 제공된다. 프로그램은 초당 수천개의 시스템 콜을 수행하기도 한다. 시스템 콜은 프로그램 내에서 하드웨어 자원을 사용하기 위해서 거는 소프트웨어 인터럽트이다.

▪ 대부분의 응용 프로그래머들은 응용 프로그래밍 인터페이스(API)에 따라 프로그램을 설계하며, API는 각 함수에 전달되어야 할 매개 변수들과 반환값을 포함하여 응용 프로그래머가 사용가능한 함수의 집합을 명시한다.
응용 프로그래머가 사용가능한 대표적인 API는 Windows API, POSIX API, Java API가 있다.
API를 구성하는 함수들은 응용 프로그래머를 대신하여 실제 시스템 콜을 호출한다. 

<시스템 콜의 유형>
프로세스 제어
▪ 프로세스 생성, 종료
▪ 프로세스 끝내기, 중지
▪ 적재, 실행
▪ 프로세스 속성 획득 및 설정
▪ 일정 시간 동안 기다리기
▪ 사건을 기다리기, 사건을 알림
▪ 메모리 할당, 메모리 반환
▪ 프로세스가 공유하는 데이터 접근을 관리하기 위한 락(lock)

파일 조작
▪ 파일 생성, 삭제
▪ 파일 열기, 닫기
▪ 읽기, 쓰기, 위치 변경
▪ 파일 속성 획득 및 설정

장치 관리
▪ 장치 요청, 장치 해제
▪ 읽기, 쓰기, 접근 위치 재조정
▪ 장치 속성 획득 및 설정
▪ 논리적으로 부착 및 분리

정보 유지 관리
▪ 현재 시간 및 날짜 획득 및 설정
▪ 시스템 날짜 획득 및 설정
▪ 프로세스, 파일, 및 장치 속성 획득 및 설정

통신
▪ 통신 연결 생성, 삭제
▪ 메시지 전달 모델을 사용한다면 호스트 이름 또는 프로세스 이름을 명시
하여 메시지 송신 또는 수신
▪ 클라이언트에서 서버로
▪ 공유-메모리 모델의 경우에는 메모리 영역 생성 및 접근 권한 획득
▪ 상태 정보 전송
▪ 원격 장치의 부착 및 분리

보호
▪ 자원에 대한 접근 제어
▪ 권한 획득 및 세팅
▪ 사용자 접근 허용 및 거부


▪ 시스템 콜이 어떻게 구현되었는지 개발자는 알 필요가 없다. 운영체제의 규칙이나 내규까지 알 필요는 없으며 return 값이 뭔지 알고, OS의 작업을 이해하면 된다.
OS 인터페이스의 상세한 부분은 API에 의해서 숨겨져 있다. 

▪ 키보드 값 입력/모니터 출력/파일 생성,읽기,쓰기,닫기 등등 다양한 시스템콜이 있는데, 각각의 시스템콜은 번호가 매겨져 있어서 시스템콜 인터페이스의 숫자에 따라서 테이블을 가지고 있고 그것에 대한 명령어를 시작한다.

▪ 시스템콜은 일종의 함수이며, 함수는 매개변수와 리턴타입을 가진다. 매개변수와 리턴 타입은 운영체제에 따라 다르다. 운영체제에 매개변수를 전달하기 위해서 일반적으로 다음과 같은 세가지 방법을 사용한다.
- 매개변수를 CPU의 레지스터에 전달
- (레지스터보다 매개변수가 많은 경우) 메모리 내 블록이나 테이블에 저장되고, 블록의 주소가 레지스터 내 매개변수로 전달
- 매개변수는 프로그램에 의해 스택에 넣어지고 운영체제에 의해 꺼내짐
(참고)두번째, 세번째 방법의 경우 매개변수들의 개수나 길이를 제한하지 않는다.

▪ 시스템 프로그램은 시스템 유틸리티로도 알려진, 프로그램 개발과 실행을 위해 보다 편리한 환경을 제공
- 파일 관리: 파일과 디렉터리를 생성, 삭제, 복사, 개명, 인쇄, 덤프, 리스트하고 조작한다.
- 상태 정보: 어떤 프로그램들은 시스템에게 상태 정보를 묻는다. 
- 파일 변경: 저장 장치에 저장된 파일의 내용을 생성 및 변경하기 위해 다수의 문장 편집기가 사용가능하다.
- 프로그래밍 언어 지원: 일반적인 프로그래밍 언어들에 대한 컴파일러, 어셈블러, 디버거, 해석기가 운영체제와 함께 사용자에게 제공되거나 별도로 다운 가능하다.
- 프로그램 적재와 수행: 프로그램이 어셈블 혹은 컴파일 된 후 그것이 수행되려면 반드시 메모리에 적재되어야 한다. 시스템은 절대 로더, 재배치 가능 로더, 링키지 에디터, 중첩 로더 등을 제공할 수 있으며 디버깅 시스템도 필요하다.
- 통신: 프로세스, 사용자, 그리고 다른 컴퓨터 시스템들 사이에 가상 접속을 이루기 위한 기법을 제공한다.
- 백그라운드 서비스: 항상 실행되는 시스템 프로그램 프로세스는 서비스, 서브시스템 또는 디먼으로 알려져 있다.
- 응용 프로그램: 대부분의 운영체제는 시스템 프로그램과 함께 일반적인 문제점을 해결하거나 연산을 수행하는데 유용한 프로그램들도 제공한다.

▪ 시스템 부트
- 컴퓨터의 전원을 켜면 명령 레지스터는 미리 지정된 메모리 위치를 가리키고, 그곳에서부터 실행을 시작한다. 그 위치에는 부트스트랩 프로그램이 존재한다.
- 부트스트램 프로그램은 ROM 안에 저장된다.
<부팅 절차>
1. 기계의 상태를 진단하는 작업
2. CPU 레지스터, RAM의 내용, 장치 제어기 등 시스템 전반에 걸쳐 초기화
3. 디스크에 있는 부트 블록을 적재하고 시작한다.
4. 모든 부트 프로그램이 적재되면, 파일 시스템을 탐색하여 커널을 찾고 메모리에 적재한 후 실행을 시작한다.


---
**참고**  
Operating System Concepts 에센셜/Abraham Silberschatz , Peter Baer Galvin , Greg Gagne/교보문고
